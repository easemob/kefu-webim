dist: trusty
language: node_js
node_js:
  - 14

env:
  global:
    # - secure: zP5Surp70BQR4JIwVG8jujlImRqHUErf4S6Ub3ZLCI7PC/1F5mzGANhCkoPIheYpGJ+fu/Tj3Fyjyqh9pAQzXXjGCnJUKtYngkyVgPBAdx3+zbWk2xSllOntjn2Q2Vze41UiEv2XIxRiJ1paWU/rT8R3RTyQlx+5NQL5sT4ZGLYUse0aEszOokRG9bNOezGzh/qtBqwG12+kSIlTK8il/cFftj7YKNzlG9cLLvJ2I/2CU+QtWnhJRLB/IM3OC5WIN5Cvj22ayw7ULf4JgVzWnLCGe1Y6oTUckOXjDFlVB9qVkK3215NVgEYJpQfumBjFRR9wrpGlJEbgqUa8D/Vd8ZX83JJBGUni9/ukSbZr9Ts8nOzD60if4ZbUnI9vqzFvMroNZZ999ZxOlx5eiLNB0eJCMPpa4AtrtqCUMRNKWFem71Rq7wz9DrnbFCEYx/RNVPdGAaWjCPPemaWswvD6aTbVa040bvRGBB+P7+Axp15QqZkxFtn80xUzon8kC1T3zbUcx+tt7My3JrM+l6hZgn9IkMGR0FrtfU2LT1+usxhB439QgmoFaL/olbECwtCY0Qzav+WW/GMSaRhlD9pvshsnlIFiOaMBCh/U8PVDwjj/V3XaMu8UJu3JjkLvwkW3XWvzKnQtxmtkI6BxPOHR/NfGTZR6WXDgmlL/ZNqwL4I=
    # - secure: toy4B0TuZ1pwxuUAx13R333rh9bcAmyBEGc3vg6ASDx2rGU+/WTdFErfCWWOWkloCz4rJUiwwwxC5Y4xJZ5qmuMMqYUHiHpmg0Cj3IFkXn/9C4l6TCAOazRmaKlWP3ac03nvyl0FYKEyy7TaNeBfT59ofNpvl92I0i/fNX+Ix9falAUsubqdoV+hKazHSpQp/I6bOheTykxS5XiHFqW2qNNdIOh51w/e0a4IIyATT98s6xypDYXvjfkWqIDohFB1qaAXnNgJ7ugTBitFQ2gOtGtdcxpS+DHeyBrUTIquAJvlTXJqM5x1LwkSjvt6fGWhA3hYA+ZkhzF8ekxp3u4V2Q3Vm7H61mv0QJm5BaR9UHd3B/CaVDNGlZEUgQC7yKGMvgJCVDwNGJglA6X6fQ741xMXdf/9xdP91ImLDTlDQmZJvfjdksO409gZ30NBK8c6k8y2GS3xZhVcz+ZyqJfyQwitkhgtKoYeBvDwfr4Va2+qH1Q0zW7ZWxvkcDWErzVs0opq87QnOuFjkE/GCTDkw/nq2d2Po0z9iFt4KmebP49yDGV4nHs9eBmvqzcOg/PDZyd2TjFAeqHEijJenEvhkU/U/ViPbOEa8oXyQJ9fDEYKs49oXfVrXjuTduhIe18lj7eYSEw0tuiW2xFKhRltlGFbsgZzrY4/z1RJcnWgpHI=
    - secure: GWm+y0WK5SJjk8VxSSFMpq+kWHvdHjocLnpZlRHFpQsZoE2ksl84CM7LyRy3ywH5tFwA6hbhXfbb9enStnHCnxOdyNJojJDGGfdUjd2jJ8VuqLlhhfsHataB2B0x68r/V0ZSbiXs3cPk8gR0Up8Jvug+3w5nl+2wZ64LCK4DvcQGwPDbB/5Cf1B/oodLYFhZllO8teH4/hE3zTsYtlt0UFZ/Kl+klo7r4jiuTg1MuxB8oExgyHoa+wla0ghPeNn3Opy84cRUl4HgElRlILRBDhnvVechtnrkmyiP9VxaLVK2iV1qQs0K4P25XzmPDP+lS/9CNWd3EwQ1BJ6wyNGHZMxmbmOv1CxAn+6ltV+N0kHPDJPXsod3vBfwPnXLcknx7BEOUA4Ll96tPcyqWkMH4qBxkaUhYLUmzYv9cSwhppr5csv/o4Pv8EfxZnMkyYvJJJn/yF/8+jCxR8xQbQFQGHMDMOvR1UuHxyLbV2HIlCQcW8bz7ZmtveyxQPbriYHLCk3OFxw50wg+0Tpmo41z43ZvKIyaU2HtD1ISv2VwY3DYCp+TM1oA3Z8xQG2q2ULwZD+5WlhrJ/vCvlrb9QMR6xx2ivK1gNWJBEs9YKglaftpEsmu6M1QuyB22yQNzHDnslFkIqGivpZcYBGDPv9hdO34437wOlUD7lEWGUazH9U=
    - secure: YfpSESSC5eBC9BxkvHYcQrKXsbEKBsHo9CIG2ejmZTGFpcND7BQ+SWAiG2YlYqgc4zMeyQTM0bEps7yc7yNxbKbroC6GuiTDSejNyZ2tIAQN4wRYrMXdo09ggMD1koI59Rj9BT36BpC5VEI5LCwlXfW6AZKs+1JGAGHKwX8toDUcFarr6tcpWjnrUFyiJy5WoMq1FpQtuJIjtiOHvUtb7XiDCsfmB1n3Q1YmHutMCkDC6RvmFuSOpXulynekE6XiQZsv/gNwWAs8HUH99Nz078yAFi7le3fAPURJZ3cP7klHHX3G+XjTDBL9TM0LWCfTSaJfQwqgjriWLE04iy6JlQieLdHf77yWNA0CCYQUhe3gSRvso24RD9P1aB2bes8/9GW/36cZWTjyhfkspiHFZOLqSOrKe+UYCCqlzaKA688C31MAubktKWZX2wfNh3bfEHpOXFG5hUkE0YkWRuzVd+2dlf4D1g7+1ZR0WOL/07KRp3FSAUOAaUje3oGs+gpe9NLJ2ZJtyS9sVXQheKgW6SalOWH5sO1R1cyvKxEAF2595z7yZyy7XfJIa3ukqDx7pcoBm9zQYpDqzghKhtbR7sh357cU4hk9N+GY1hTN5KXeoloEYyvO66jaMCiHloAZD+kAjp/frcp36pR8tvXaqrJ5z/sVjs10APnKoBmEYOA=
    - secure: iAGC2uvoZQDaCtVrCwQoOi8hkq6nk3UCzbo1Iq70dBI7mX3HXiWbjuoKuVLPgDArpZ9tu0BVO2S3SezmH3OIwqDowch77+od9ELqv70bm+EldHT9q8ydTBdBBhrDYuhw94jLTQ22kHigvcM4tfONCXykHkMsf30m5dxu/NJ4j7zuNStBdsa/ClWp/xYMCTgsaiWSD/tLPHVEBdgGsznf8uH+M+qNZSujZI0eS4Dp8xzV5mk9CGIbjCau78RnzoVDtytnzotO0JeYqw51rF7getU7saIIAiEZhhaAFwS6LA67S3tJpa/+eYnzacAKKmt6GucYG2Tp0078BeOQrhxL97QQhWpeMr2n1nKp8Tllw7qXYgkbuXwRFzTHMQKaC0qf+NmMugG0iwwITzEf0PU3bFxEW52iec60Wml1CqwuvvWXhGF0oDwDlHFWckF7XNUMXzRauf3hr4LMW/bnpKf2rXHEcWoLfvvaOW4aluOoJx2mQjWu74iiqGob+Wy6+aHFO1sdSO3/CPGPtfFiIPIWLHD/RmGpLPZyh6Jyl5/cu1RT6GLvZDjKGpUvCXZq45bWma2kjUotf0VLr/004fs3I5NRy4tRZNh1VhqxzYudAAfgETTaEW+767lsXrvdDYqYJgqr9RKrF6CLuHBdIu9LE0hfwtPxift3iSInb2KWFC8=

install:
  - npm install

jobs:
  include:
    - stage: "step1"
      name: "packing"
      script: ./travis/pack.sh
      if: commit_message =~ ^v\d+\.\d+\.\d+(\.([a-z0-9]+(_[a-z]+[a-z0-9]*)*))?\.(final|snapshot)$
      deploy:
        skip_cleanup: true
        provider: script
        script: ./travis/upload.sh
        on:
          all_branches: true

cache:
  directories:
    - node_modules
